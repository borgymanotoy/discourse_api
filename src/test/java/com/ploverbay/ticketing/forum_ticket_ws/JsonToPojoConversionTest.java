package com.ploverbay.ticketing.forum_ticket_ws;

import com.google.gson.Gson;
import com.ploverbay.ticketing.forum_ticket_ws.model.DiscourseTopic;
import com.ploverbay.ticketing.forum_ticket_ws.model.DiscourseTopicUser;
import org.junit.FixMethodOrder;
import org.junit.Test;
import org.junit.runners.MethodSorters;

import static junit.framework.TestCase.assertNotNull;

@FixMethodOrder(MethodSorters.NAME_ASCENDING)
public class JsonToPojoConversionTest extends ForumTicketWsApplicationTests {

    @Test
    public void test01_DiscourseTopicUser(){
        String json = "{\"id\": 1, \"username\": \"skwong\"}";
        Gson gson = new Gson();
        DiscourseTopicUser topicUser = gson.fromJson(json, DiscourseTopicUser.class);
        assertNotNull(topicUser);
    }

    @Test
    public void test02_DiscourseTopicDetails() {
        String json = "{\"post_stream\":{\"posts\":[{\"id\":11,\"name\":\"system\",\"username\":\"system\",\"avatar_template\":\"/user_avatar/testforum.peplink.com/system/{size}/2_1.png\",\"created_at\":\"2018-01-25T02:56:09.182Z\",\"cooked\":\"\\u003cp\\u003eStaging Discourse for RT Integration\\u003cbr\\u003e\\nThe first paragraph of this pinned topic will be visible as a welcome message to all new visitors on your homepage. It’s important!\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cstrong\\u003eEdit this\\u003c/strong\\u003e into a brief description of your community:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eWho is it for?\\u003c/li\\u003e\\n\\u003cli\\u003eWhat can they find here?\\u003c/li\\u003e\\n\\u003cli\\u003eWhy should they come here?\\u003c/li\\u003e\\n\\u003cli\\u003eWhere can they read more (links, resources, etc)?\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003e\\u003cimg src=\\\"//testforum.peplink.com/images/welcome/discourse-edit-post-animated.gif\\\" width=\\\"508\\\" height=\\\"106\\\"\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eYou may want to close this topic via the admin \\u003cimg src=\\\"//testforum.peplink.com/images/emoji/twitter/wrench.png?v=5\\\" title=\\\":wrench:\\\" class=\\\"emoji\\\" alt=\\\":wrench:\\\"\\u003e (at the upper right and bottom), so that replies don’t pile up on an announcement.\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"updated_at\":\"2018-01-25T03:49:42.852Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"avg_time\":249,\"incoming_link_count\":0,\"reads\":4,\"score\":13.05,\"yours\":false,\"topic_id\":8,\"topic_slug\":\"welcome-to-discourse\",\"display_username\":\"system\",\"primary_group_name\":null,\"primary_group_flair_url\":null,\"primary_group_flair_bg_color\":null,\"primary_group_flair_color\":null,\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"actions_summary\":[{\"id\":2,\"can_act\":true},{\"id\":5,\"hidden\":true,\"can_act\":true},{\"id\":3,\"can_act\":true},{\"id\":4,\"can_act\":true},{\"id\":8,\"can_act\":true},{\"id\":6,\"can_act\":true},{\"id\":7,\"can_act\":true}],\"moderator\":true,\"admin\":true,\"staff\":true,\"user_id\":-1,\"hidden\":false,\"hidden_reason_id\":null,\"trust_level\":4,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false},{\"id\":16,\"name\":null,\"username\":\"skwong\",\"avatar_template\":\"/letter_avatar_proxy/v2/letter/s/7cd45c/{size}.png\",\"created_at\":\"2018-01-25T04:13:36.939Z\",\"cooked\":\"\\u003cp\\u003eMy device is broken. My device serial number is 2933-BCDA-4321.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"updated_at\":\"2018-01-25T04:13:36.939Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"avg_time\":154,\"incoming_link_count\":0,\"reads\":3,\"score\":13.1,\"yours\":false,\"topic_id\":8,\"topic_slug\":\"welcome-to-discourse\",\"display_username\":null,\"primary_group_name\":null,\"primary_group_flair_url\":null,\"primary_group_flair_bg_color\":null,\"primary_group_flair_color\":null,\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"actions_summary\":[{\"id\":2,\"can_act\":true},{\"id\":5,\"hidden\":true,\"can_act\":true},{\"id\":3,\"can_act\":true},{\"id\":4,\"can_act\":true},{\"id\":8,\"can_act\":true},{\"id\":6,\"can_act\":true},{\"id\":7,\"can_act\":true}],\"moderator\":false,\"admin\":true,\"staff\":true,\"user_id\":1,\"hidden\":false,\"hidden_reason_id\":null,\"trust_level\":0,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false},{\"id\":17,\"name\":null,\"username\":\"skwong\",\"avatar_template\":\"/letter_avatar_proxy/v2/letter/s/7cd45c/{size}.png\",\"created_at\":\"2018-01-25T04:28:00.016Z\",\"cooked\":\"\\u003cp\\u003eReally broken? Are you 100% sure?\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"updated_at\":\"2018-01-25T04:28:00.016Z\",\"reply_count\":0,\"reply_to_post_number\":2,\"quote_count\":0,\"avg_time\":153,\"incoming_link_count\":0,\"reads\":3,\"score\":8.05,\"yours\":false,\"topic_id\":8,\"topic_slug\":\"welcome-to-discourse\",\"display_username\":null,\"primary_group_name\":null,\"primary_group_flair_url\":null,\"primary_group_flair_bg_color\":null,\"primary_group_flair_color\":null,\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"username\":\"skwong\",\"avatar_template\":\"/letter_avatar_proxy/v2/letter/s/7cd45c/{size}.png\"},\"actions_summary\":[{\"id\":2,\"can_act\":true},{\"id\":5,\"hidden\":true,\"can_act\":true},{\"id\":3,\"can_act\":true},{\"id\":4,\"can_act\":true},{\"id\":8,\"can_act\":true},{\"id\":6,\"can_act\":true},{\"id\":7,\"can_act\":true}],\"moderator\":false,\"admin\":true,\"staff\":true,\"user_id\":1,\"hidden\":false,\"hidden_reason_id\":null,\"trust_level\":0,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false},{\"id\":19,\"name\":\"Keno San Pedro\",\"username\":\"kenosp\",\"avatar_template\":\"/letter_avatar_proxy/v2/letter/k/a6a055/{size}.png\",\"created_at\":\"2018-01-25T05:18:19.137Z\",\"cooked\":\"\\u003cp\\u003eqwerty 12345 asdfg 67890\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"updated_at\":\"2018-01-25T05:18:19.137Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"avg_time\":242,\"incoming_link_count\":0,\"reads\":3,\"score\":12.5,\"yours\":false,\"topic_id\":8,\"topic_slug\":\"welcome-to-discourse\",\"display_username\":\"Keno San Pedro\",\"primary_group_name\":null,\"primary_group_flair_url\":null,\"primary_group_flair_bg_color\":null,\"primary_group_flair_color\":null,\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"actions_summary\":[{\"id\":2,\"can_act\":true},{\"id\":5,\"hidden\":true,\"can_act\":true},{\"id\":3,\"can_act\":true},{\"id\":4,\"can_act\":true},{\"id\":8,\"can_act\":true},{\"id\":6,\"can_act\":true},{\"id\":7,\"can_act\":true}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":2,\"hidden\":false,\"hidden_reason_id\":null,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false}],\"stream\":[11,16,17,19]},\"timeline_lookup\":[[1,13]],\"id\":8,\"title\":\"Welcome to Discourse\",\"fancy_title\":\"Welcome to Discourse\",\"posts_count\":4,\"created_at\":\"2018-01-25T02:56:09.149Z\",\"views\":9,\"reply_count\":1,\"like_count\":0,\"last_posted_at\":\"2018-01-25T05:18:19.137Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"welcome-to-discourse\",\"category_id\":1,\"word_count\":122,\"deleted_at\":null,\"user_id\":-1,\"pm_with_non_human_user\":false,\"featured_link\":null,\"pinned_globally\":true,\"pinned_at\":\"2018-01-25T02:56:09.221Z\",\"pinned_until\":null,\"draft\":null,\"draft_key\":\"topic_8\",\"draft_sequence\":0,\"posted\":false,\"unpinned\":true,\"pinned\":false,\"details\":{\"created_by\":{\"id\":-1,\"username\":\"system\",\"avatar_template\":\"/user_avatar/testforum.peplink.com/system/{size}/2_1.png\"},\"last_poster\":{\"id\":2,\"username\":\"kenosp\",\"avatar_template\":\"/letter_avatar_proxy/v2/letter/k/a6a055/{size}.png\"},\"participants\":[{\"id\":1,\"username\":\"skwong\",\"avatar_template\":\"/letter_avatar_proxy/v2/letter/s/7cd45c/{size}.png\",\"post_count\":2,\"primary_group_name\":null,\"primary_group_flair_url\":null,\"primary_group_flair_color\":null,\"primary_group_flair_bg_color\":null},{\"id\":2,\"username\":\"kenosp\",\"avatar_template\":\"/letter_avatar_proxy/v2/letter/k/a6a055/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"primary_group_flair_url\":null,\"primary_group_flair_color\":null,\"primary_group_flair_bg_color\":null},{\"id\":-1,\"username\":\"system\",\"avatar_template\":\"/user_avatar/testforum.peplink.com/system/{size}/2_1.png\",\"post_count\":1,\"primary_group_name\":null,\"primary_group_flair_url\":null,\"primary_group_flair_color\":null,\"primary_group_flair_bg_color\":null}],\"notification_level\":2,\"notifications_reason_id\":null,\"can_create_post\":true,\"can_reply_as_new_topic\":true,\"can_flag_topic\":true},\"highest_post_number\":4,\"last_read_post_number\":4,\"last_read_post_id\":19,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":true},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":true},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":true}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"private_topic_timer\":null,\"message_bus_last_id\":10,\"participant_count\":3}";
        Gson gson = new Gson();
        DiscourseTopic topic = gson.fromJson(json, DiscourseTopic.class);
        assertNotNull(topic);
//        assertNotNull(topic.getPostStream());
//        assertNotNull(topic.getPostStream().getPosts());
    }
}
